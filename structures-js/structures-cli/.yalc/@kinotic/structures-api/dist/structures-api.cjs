"use strict";var E=Object.defineProperty;var g=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>(g(r,typeof e!="symbol"?e+"":e,t),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("@kinotic/continuum-idl"),c=require("@kinotic/continuum-client");require("reflect-metadata");class b{constructor(e,t,s,n){i(this,"id");i(this,"namespace");i(this,"structure");i(this,"namedQueries");this.id=e,this.namespace=t,this.structure=s,this.namedQueries=n}}class k{constructor(e,t,s){i(this,"id");i(this,"description");i(this,"updated");this.id=e,this.description=t,this.updated=s}}class D{constructor(e,t,s,n){i(this,"id");i(this,"namespace");i(this,"name");i(this,"entityDefinition");i(this,"description");i(this,"created");i(this,"updated");i(this,"published");i(this,"publishedTimestamp");this.namespace=e,this.name=t,this.entityDefinition=s,this.description=n}}class Q extends a.C3Decorator{constructor(){super(),this.type="AutoGeneratedId"}}class C extends a.C3Decorator{constructor(){super();i(this,"propertyName");this.type="Discriminator"}withPropertyName(t){return this.propertyName=t,this}}var d=(r=>(r[r.NONE=0]="NONE",r[r.SHARED=1]="SHARED",r))(d||{});class A extends a.C3Decorator{constructor(){super();i(this,"multiTenancyType",d.NONE);this.type="Entity"}withMultiTenancyType(t){return this.multiTenancyType=t,this}}class B extends a.C3Decorator{constructor(){super(),this.type="Flattened"}}class T extends a.C3Decorator{constructor(){super(),this.type="Id"}}class w extends a.C3Decorator{constructor(){super(),this.type="Nested"}}class O extends a.C3Decorator{constructor(t){super();i(this,"statements");this.type="Query",this.statements=t}}class R extends a.C3Decorator{constructor(){super(),this.type="Text"}}class U extends c.AbstractIterablePage{constructor(t,s,n,u){super(s,n);i(this,"structureId");i(this,"entitiesService");this.entitiesService=t,this.structureId=u}findNext(t){return this.entitiesService.findAllSinglePage(this.structureId,t)}}class F extends c.AbstractIterablePage{constructor(t,s,n,u,o){super(s,n);i(this,"searchText");i(this,"structureId");i(this,"entitiesService");this.entitiesService=t,this.searchText=u,this.structureId=o}findNext(t){return this.entitiesService.searchSinglePage(this.structureId,this.searchText,t)}}class v{constructor(e){i(this,"serviceProxy");const t="org.kinotic.structures.api.services.JsonEntitiesService";this.serviceProxy=(e==null?void 0:e.serviceProxy(t))||c.Continuum.serviceProxy(t)}bulkSave(e,t){return this.serviceProxy.invoke("bulkSave",[e,t])}bulkUpdate(e,t){return this.serviceProxy.invoke("bulkUpdate",[e,t])}count(e){return this.serviceProxy.invoke("count",[e])}countByQuery(e,t){return this.serviceProxy.invoke("countByQuery",[e,t])}deleteById(e,t){return this.serviceProxy.invoke("deleteById",[e,t])}deleteByQuery(e,t){return this.serviceProxy.invoke("deleteByQuery",[e,t])}async findAll(e,t){const s=await this.findAllSinglePage(e,t);return new U(this,t,s,e)}async findAllSinglePage(e,t){return this.serviceProxy.invoke("findAll",[e,t])}findById(e,t){return this.serviceProxy.invoke("findById",[e,t])}findByIds(e,t){return this.serviceProxy.invoke("findByIds",[e,t])}namedQuery(e,t,s){return this.serviceProxy.invoke("namedQuery",[e,t,s])}save(e,t){return this.serviceProxy.invoke("save",[e,t])}async search(e,t,s){const n=await this.searchSinglePage(e,t,s);return new F(this,s,n,t,e)}async searchSinglePage(e,t,s){return this.serviceProxy.invoke("search",[e,t,s])}update(e,t){return this.serviceProxy.invoke("update",[e,t])}}const l=new v;class M extends c.AbstractIterablePage{constructor(t,s,n,u,o,h,P){super(n,u);i(this,"pageableIndex");i(this,"parameters");i(this,"queryName");i(this,"structureId");i(this,"entitiesService");this.entitiesService=t,this.pageableIndex=s,this.parameters=o,this.queryName=h,this.structureId=P}findNext(t){return this.parameters[this.pageableIndex].value=t,this.entitiesService.namedQuery(this.structureId,this.queryName,this.parameters)}}class y{constructor(e,t,s){i(this,"structureNamespace");i(this,"structureName");i(this,"structureId");i(this,"entitiesService");this.structureNamespace=e,this.structureName=t,this.structureId=(e+"."+t).toLowerCase(),this.entitiesService=s||l}async bulkSave(e){const t=await this.beforeBulkSaveOrUpdate(e);return this.entitiesService.bulkSave(this.structureId,t)}async bulkUpdate(e){const t=await this.beforeBulkSaveOrUpdate(e);return this.entitiesService.bulkUpdate(this.structureId,t)}count(){return this.entitiesService.count(this.structureId)}countByQuery(e){return this.entitiesService.countByQuery(this.structureId,e)}deleteById(e){return this.entitiesService.deleteById(this.structureId,e)}deleteByQuery(e){return this.entitiesService.deleteByQuery(this.structureId,e)}findAll(e){return this.entitiesService.findAll(this.structureId,e)}findById(e){return this.entitiesService.findById(this.structureId,e)}findByIds(e){return this.entitiesService.findByIds(this.structureId,e)}namedQuery(e,t){return this.entitiesService.namedQuery(this.structureId,e,t)}async namedQueryPage(e,t,s,n){const u=await this.entitiesService.namedQuery(this.structureId,e,t);return new M(this.entitiesService,n,s,u,t,e,this.structureId)}async save(e){const t=await this.beforeSaveOrUpdate(e);return this.entitiesService.save(this.structureId,t)}search(e,t){return this.entitiesService.search(this.structureId,e,t)}async update(e){const t=await this.beforeSaveOrUpdate(e);return this.entitiesService.update(this.structureId,t)}async beforeBulkSaveOrUpdate(e){return Promise.resolve(e)}async beforeSaveOrUpdate(e){return Promise.resolve(e)}}class S extends c.CrudServiceProxy{constructor(){super(c.Continuum.serviceProxy("org.kinotic.structures.api.services.NamedQueriesService"))}}class p extends c.CrudServiceProxy{constructor(){super(c.Continuum.serviceProxy("org.kinotic.structures.api.services.NamespaceService"))}createNamespaceIfNotExist(e,t){return this.serviceProxy.invoke("createNamespaceIfNotExist",[e,t])}}class _ extends c.CrudServiceProxy{constructor(){super(c.Continuum.serviceProxy("org.kinotic.structures.api.services.StructureService"))}findAllPublishedForNamespace(e,t){return this.serviceProxy.invoke("findAllPublishedForNamespace",[e,t])}countForNamespace(e){return this.serviceProxy.invoke("countForNamespace",[e])}publish(e){return this.serviceProxy.invoke("publish",[e])}unPublish(e){return this.serviceProxy.invoke("unPublish",[e])}}const G=new p,q=new _,L=new v,H=new S;exports.Structures=void 0;(r=>{function e(){return G}r.getNamespaceService=e;function t(){return q}r.getStructureService=t;function s(){return L}r.getEntitiesService=s;function n(){return H}r.getNamedQueriesService=n;function u(o,h){return new y(o,h)}r.createEntityService=u})(exports.Structures||(exports.Structures={}));var f=(r=>(r[r.DOUBLE=0]="DOUBLE",r[r.FLOAT=1]="FLOAT",r[r.INT=2]="INT",r[r.LONG=3]="LONG",r[r.SHORT=4]="SHORT",r))(f||{}),m=(r=>(r.Entity="__structures-entity__",r.Id="__structures-id__",r.AutoGeneratedId="__structures-auto-generated-id__",r.Flattened="__structures-flattened__",r.Nested="__structures-nested__",r.Text="__structures-text__",r.NotNull="__structures-notnull__",r.Precision="__structures-precision__",r.Discriminator="__structures-discriminator__",r.Query="__structures-query__",r))(m||{});class I{constructor(e){i(this,"multiTenancyType");this.multiTenancyType=e}}function V(r=d.NONE){return function(e){Reflect.defineMetadata("__structures-entity__",new I(r),e)}}function j(r,e){Reflect.defineMetadata("__structures-id__",{},r,e)}function J(r,e){Reflect.defineMetadata("__structures-auto-generated-id__",{},r,e)}function z(r,e){Reflect.defineMetadata("__structures-flattened__",{},r,e)}function K(r,e){Reflect.defineMetadata("__structures-nested__",{},r,e)}function W(r,e){Reflect.defineMetadata("__structures-text__",{},r,e)}function X(r,e){Reflect.defineMetadata("__structures-notnull__",{},r,e)}function Y(r){return function(e,t,s){return Reflect.defineMetadata("__structures-query__",r,e,t),s}}class N{constructor(e){i(this,"precisionType");this.precisionType=e}}function Z(r=f.INT){return function(e,t){Reflect.defineMetadata("__structures-precision__",new N(r),e,t)}}class x{constructor(e){i(this,"propertyName");this.propertyName=e}}function $(r){return function(e,t){Reflect.defineMetadata("__structures-discriminator__",new x(r),e,t)}}exports.AutoGeneratedId=J;exports.AutoGeneratedIdDecorator=Q;exports.Discriminator=$;exports.DiscriminatorConfig=x;exports.DiscriminatorDecorator=C;exports.EntitiesService=v;exports.EntitiesServiceSingleton=l;exports.Entity=V;exports.EntityConfig=I;exports.EntityDecorator=A;exports.EntityService=y;exports.Flattened=z;exports.FlattenedDecorator=B;exports.Id=j;exports.IdDecorator=T;exports.MultiTenancyType=d;exports.NamedQueriesDefinition=b;exports.NamedQueriesService=S;exports.Namespace=k;exports.NamespaceService=p;exports.Nested=K;exports.NestedDecorator=w;exports.NotNull=X;exports.Precision=Z;exports.PrecisionConfig=N;exports.Query=Y;exports.QueryDecorator=O;exports.Structure=D;exports.StructureService=_;exports.StructuresDecorator=m;exports.Text=W;exports.TextDecorator=R;
//# sourceMappingURL=structures-api.cjs.map
