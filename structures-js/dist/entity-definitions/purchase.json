{
  "type": "object",
  "name": "Purchase",
  "namespace": "ecommerce",
  "decorators": [
    {
      "type": "Entity",
      "multiTenancyType": 1,
      "entityType": 0
    }
  ],
  "metadata": {},
  "parent": null,
  "properties": [
    {
      "name": "id",
      "decorators": [
        {
          "type": "AutoGeneratedId"
        }
      ],
      "type": {
        "type": "string"
      }
    },
    {
      "name": "purchaseNumber",
      "decorators": [
        {
          "type": "Text"
        },
        {
          "type": "NotNull"
        }
      ],
      "type": {
        "type": "string"
      }
    },
    {
      "name": "customerId",
      "type": {
        "type": "string"
      }
    },
    {
      "name": "status",
      "type": {
        "type": "enum",
        "name": "PurchaseStatus",
        "namespace": "ecommerce",
        "values": [
          "PENDING",
          "PAID",
          "SHIPPED",
          "DELIVERED",
          "CANCELLED",
          "REFUNDED",
          "RETURNED"
        ]
      }
    },
    {
      "name": "items",
      "type": {
        "type": "array",
        "contains": {
          "type": "object",
          "name": "PurchaseItem",
          "namespace": "ecommerce",
          "metadata": {},
          "parent": null,
          "properties": [
            {
              "name": "productId",
              "type": {
                "type": "string"
              }
            },
            {
              "name": "sku",
              "type": {
                "type": "string"
              }
            },
            {
              "name": "name",
              "type": {
                "type": "string"
              }
            },
            {
              "name": "quantity",
              "type": {
                "type": "int"
              }
            },
            {
              "name": "unitPrice",
              "type": {
                "type": "int"
              }
            },
            {
              "name": "totalPrice",
              "type": {
                "type": "int"
              }
            }
          ]
        }
      }
    },
    {
      "name": "subtotal",
      "type": {
        "type": "double"
      }
    },
    {
      "name": "tax",
      "type": {
        "type": "double"
      }
    },
    {
      "name": "shipping",
      "type": {
        "type": "double"
      }
    },
    {
      "name": "discount",
      "type": {
        "type": "double"
      }
    },
    {
      "name": "total",
      "type": {
        "type": "double"
      }
    },
    {
      "name": "shippingAddress",
      "type": {
        "type": "object",
        "name": "Address",
        "namespace": "ecommerce",
        "metadata": {},
        "parent": null,
        "properties": [
          {
            "name": "street",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "city",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "state",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "postalCode",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "country",
            "type": {
              "type": "string"
            }
          }
        ]
      }
    },
    {
      "name": "billingAddress",
      "type": {
        "type": "object",
        "name": "Address",
        "namespace": "ecommerce",
        "metadata": {},
        "parent": null,
        "properties": [
          {
            "name": "street",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "city",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "state",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "postalCode",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "country",
            "type": {
              "type": "string"
            }
          }
        ]
      }
    },
    {
      "name": "payment",
      "type": {
        "type": "object",
        "name": "Payment",
        "namespace": "ecommerce",
        "metadata": {},
        "parent": null,
        "properties": [
          {
            "name": "method",
            "type": {
              "type": "object",
              "name": "PaymentMethod",
              "namespace": "ecommerce",
              "metadata": {},
              "parent": null,
              "properties": [
                {
                  "name": "type",
                  "type": {
                    "type": "enum",
                    "name": "PaymentMethodType",
                    "namespace": "ecommerce",
                    "values": [
                      "CREDIT_CARD",
                      "DEBIT_CARD",
                      "PAYPAL",
                      "BANK_TRANSFER",
                      "CRYPTO",
                      "GIFT_CARD"
                    ]
                  }
                },
                {
                  "name": "lastFour",
                  "type": {
                    "type": "string"
                  }
                },
                {
                  "name": "expiryMonth",
                  "type": {
                    "type": "int"
                  }
                },
                {
                  "name": "expiryYear",
                  "type": {
                    "type": "int"
                  }
                },
                {
                  "name": "isDefault",
                  "type": {
                    "type": "boolean"
                  }
                }
              ]
            }
          },
          {
            "name": "transactionId",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "type": {
              "type": "enum",
              "name": "PaymentStatus",
              "namespace": "ecommerce",
              "values": [
                "PENDING",
                "COMPLETED",
                "FAILED",
                "REFUNDED",
                "PARTIALLY_REFUNDED",
                "CANCELLED"
              ]
            }
          },
          {
            "name": "amount",
            "type": {
              "type": "int"
            }
          },
          {
            "name": "currency",
            "type": {
              "type": "string"
            }
          },
          {
            "name": "lastFour",
            "type": {
              "type": "string"
            }
          }
        ]
      }
    },
    {
      "name": "trackingNumber",
      "type": {
        "type": "string"
      }
    },
    {
      "name": "carrier",
      "type": {
        "type": "string"
      }
    },
    {
      "name": "estimatedDeliveryDate",
      "type": {
        "type": "date"
      }
    },
    {
      "name": "actualDeliveryDate",
      "type": {
        "type": "date"
      }
    },
    {
      "name": "createdAt",
      "type": {
        "type": "date"
      }
    },
    {
      "name": "updatedAt",
      "type": {
        "type": "date"
      }
    }
  ]
}