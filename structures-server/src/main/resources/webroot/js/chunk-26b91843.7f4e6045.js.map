{"version":3,"sources":["webpack:///./src/frontends/structures-admin/pages/structures/util/DatetimeUtil.ts","webpack:///./src/frontends/structures-admin/pages/structures/structures/StructuresList.vue","webpack:///./src/frontends/structures-admin/pages/structures/structures/StructuresList.vue?743f","webpack:///./src/frontends/structures-admin/pages/structures/structures/StructuresList.vue?31a6","webpack:///./src/frontends/structures-admin/pages/structures/structures/StructuresList.vue?17d5"],"names":["DatetimeUtil","_classCallCheck","_createClass","key","value","formatDateFromEpoch","timeInMills","ret","_Date$toLocaleString$","Date","Number","toLocaleString","hour12","split","_Date$toLocaleString$2","_slicedToArray","date","time","formatDate","dateTime","length","_Date$toLocaleString$3","_Date$toLocaleString$4","attrs","staticClass","ref","on","onAddItem","_vm","scopedSlots","_ref","fn","_ref2","item","_ref3","_v","_s","updated","_ref4","publishedTimestamp","_ref5","_c","expression","_ref7","name","rawName","render","staticRenderFns","StructuresList","_Vue","_this","_callSuper","headers","text","sortable","dataSource","Structures","getStructureService","loading","icons","database","mdiDatabase","unpublish","mdiUmbraco","graph","mdiGraphql","_inherits","this","$router","push","concat","$route","path","onEditItem","identifiable","id","_publish","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_a","table","wrap","_callee$","_context","prev","next","confirm","$refs","crudTable","publish","find","t0","console","error","stack","displayAlert","message","stop","_x","apply","arguments","_unPublish","_callee2","_callee2$","_context2","unPublish","_x2","toStructureItemsPage","structure","Vue","__decorate","Component","computed","components","CrudTable","component"],"mappings":"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","file":"js/chunk-26b91843.7f4e6045.js","sourcesContent":["\n\nexport default class DatetimeUtil {\n    public static formatDateFromEpoch(timeInMills: number): string {\n        let ret: string = ''\n        if (timeInMills !== 0) {\n            const [date, time] = new Date(Number(timeInMills)).toLocaleString('en-US', {hour12: false}).split(', ')\n            ret = date + ' ' + time\n        }\n        return ret\n    }\n\n    public static formatDate(dateTime: string): string {\n        let ret: string = ''\n        if (dateTime?.length > 0) {\n            const [date, time] = new Date(dateTime).toLocaleString('en-US', {hour12: false}).split(', ')\n            ret = date + ' ' + time\n        }\n        return ret\n    }\n}","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-container',{staticClass:\"no-gutters\",attrs:{\"fill-height\":\"\",\"fluid\":\"\"}},[_c('v-row',{staticClass:\"no-gutters fill-height\"},[_c('v-col',[_c('CrudTable',{ref:\"crudTable\",attrs:{\"data-source\":_vm.dataSource,\"headers\":_vm.headers,\"singleExpand\":true,\"disable-modifications\":true},on:{\"add-item\":_vm.onAddItem,\"edit-item\":_vm.onEditItem},scopedSlots:_vm._u([{key:\"item.namespace\",fn:function({ item }){return [_c('span',[_vm._v(_vm._s(item.namespace))])]}},{key:\"item.created\",fn:function({ item }){return [_vm._v(\" \"+_vm._s(_vm.DatetimeUtil.formatDate(item.created))+\" \")]}},{key:\"item.updated\",fn:function({ item }){return [_vm._v(\" \"+_vm._s(_vm.DatetimeUtil.formatDate(item.updated))+\" \")]}},{key:\"item.publishedTimestamp\",fn:function({ item }){return [_vm._v(\" \"+_vm._s(_vm.DatetimeUtil.formatDate(item.publishedTimestamp))+\" \")]}},{key:\"item.published\",fn:function({ item }){return [_c('v-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.published),expression:\"item.published\"}],attrs:{\"medium\":\"\",\"title\":\"Structure Published\"}},[_vm._v(\" fab fa-product-hunt \")])]}},{key:\"expanded-item\",fn:function({ item }){return [_c('td',{key:item.id,staticClass:\"pa-6\",attrs:{\"colspan\":_vm.headers.length}},[_c('pre',[_vm._v(_vm._s(item?.entityDefinition))])])]}},{key:\"additional-actions\",fn:function({ item }){return [_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(!item.item.published),expression:\"!item.item.published\"}],key:'publish-'+item.item.id,staticClass:\"mr-2\",attrs:{\"small\":\"\",\"icon\":\"\",\"loading\":item['publishing'],\"title\":\"Publish\"},on:{\"click\":function($event){return _vm.publish(item)}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\" fab fa-product-hunt \")])],1),_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.item.published),expression:\"item.item.published\"}],staticClass:\"mr-2\",attrs:{\"small\":\"\",\"icon\":\"\",\"title\":\"Manage\"},on:{\"click\":function($event){return _vm.toStructureItemsPage(item.item)}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.icons.database)+\" \")])],1),_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.item.published),expression:\"item.item.published\"}],key:'unpublish-'+item.item.id,staticClass:\"mr-2 red--text\",attrs:{\"small\":\"\",\"icon\":\"\",\"loading\":item['publishing'],\"title\":\"Un-Publish\"},on:{\"click\":function($event){return _vm.unPublish(item)}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.icons.unpublish)+\" \")])],1)]}}])})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport {Component, Vue} from 'vue-property-decorator'\nimport {DataTableHeader} from 'vuetify'\nimport {Identifiable} from '@kinotic/continuum-client'\nimport CrudTable from '@/frontends/continuum/components/CrudTable.vue'\nimport {\n    mdiDatabase,\n    mdiUmbraco,\n    mdiGraphql\n} from '@mdi/js'\nimport {Structures, IStructureService} from '@kinotic/structures-api'\nimport DatetimeUtil from '@/frontends/structures-admin/pages/structures/util/DatetimeUtil'\n\n/**\n * Provides a List page that can be used with the {@link CrudLayout}\n * to display a {@link CrudTable} when you do not need to override any columns\n */\n\n@Component({\n    computed: {\n        DatetimeUtil() {\n            return DatetimeUtil\n        }\n    },\n    components: {CrudTable}\n})\nexport default class StructuresList extends Vue {\n\n    private headers: DataTableHeader[] = [\n        {text: '', value: 'data-table-expand', sortable: false},\n        {text: 'Id', value: 'id', sortable: true},\n        {text: 'Namespace', value: 'namespace', sortable: true},\n        {text: 'Name', value: 'name', sortable: true},\n        {text: 'Description', value: 'description', sortable: false},\n        {text: 'Created', value: 'created', sortable: true},\n        {text: 'Last Updated', value: 'updated', sortable: true},\n        {text: 'Published', value: 'published', sortable: true},\n        {text: 'Published On', value: 'publishedTimestamp', sortable: true}\n    ]\n\n    /**\n     * Services\n     */\n    private dataSource: IStructureService = Structures.getStructureService()\n    private loading: { [key: string]: boolean } = {}\n\n    private icons = {\n        database: mdiDatabase,\n        unpublish: mdiUmbraco,\n        graph: mdiGraphql\n    }\n\n    constructor() {\n        super()\n    }\n\n\n    public onAddItem() {\n        this.$router.push(`${this.$route.path}/add`)\n    }\n\n    public onEditItem(identifiable: Identifiable<string>) {\n        this.$router.push(`${this.$route.path}/edit/${identifiable.id}`)\n    }\n\n    public async publish(item: any) {\n        item['publishing'] = true\n        if (confirm('Are you sure you want to Publish this Structure?')) {\n            let table: any = this.$refs?.crudTable\n            try {\n                await this.dataSource.publish(item.item.id)\n                table?.find() // refresh table\n                delete item['publishing']\n            } catch (error: any) {\n                delete item['publishing']\n                console.error(error.stack, error)\n                table?.displayAlert(error.message)\n            }\n        }\n    }\n\n    public async unPublish(item: any) {\n        item['publishing'] = true\n        if (confirm('Are you sure you want to Remove Published Status for this Structure? \\nAll data saved under this Structure will be permanently deleted, proceed with caution.')) {\n            let table: any = this.$refs?.crudTable\n            try {\n                await this.dataSource.unPublish(item.item.id)\n                table?.find() // refresh table\n                delete item['publishing']\n            } catch (error: any) {\n                delete item['publishing']\n                console.error(error.stack, error)\n                table?.displayAlert(error.message)\n            }\n        }\n    }\n\n    public toStructureItemsPage(structure: any) {\n        this.$router.push({path: `/entity/${structure.id}`})\n    }\n}\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StructuresList.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StructuresList.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./StructuresList.vue?vue&type=template&id=756fd942&scoped=true\"\nimport script from \"./StructuresList.vue?vue&type=script&lang=ts\"\nexport * from \"./StructuresList.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"756fd942\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}