import{au as ve,k as ye,bs as Se,P as ue,aD as te,aE as ne,bt as Ae,J as Fe,bu as de,r as je,bv as Ie,x as _e,bw as Te,j as Ee,B as Re,bx as Be,c as Ve,o as Ge,N as De,m as pe}from"./CwV9-nPG.js";import{s as Me}from"./BZ7rLBd_.js";function N(e){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},N(e)}function be(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function ae(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?be(Object(t),!0).forEach(function(n){Pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Pe(e,r,t){return(r=Ne(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ne(e){var r=Ke(e,"string");return N(r)=="symbol"?r:r+""}function Ke(e,r){if(N(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(N(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function E(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function f(w,T,V,W){var q=T&&T.prototype instanceof p?T:p,C=Object.create(q.prototype);return F(C,"_invoke",function(S,a,o){var l,u,s,m=0,$=o||[],c=!1,y={p:0,n:0,v:e,a:R,f:R.bind(e,4),d:function(j,k){return l=j,u=0,s=e,y.n=k,v}};function R(h,j){for(u=h,s=j,r=0;!c&&m&&!k&&r<$.length;r++){var k,O=$[r],B=y.p,A=O[2];h>3?(k=A===j)&&(u=O[4]||3,s=O[5]===e?O[3]:O[5],O[4]=3,O[5]=e):O[0]<=B&&((k=h<2&&B<O[1])?(u=0,y.v=j,y.n=O[1]):B<A&&(k=h<3||O[0]>j||j>A)&&(O[4]=h,O[5]=j,y.n=A,u=0))}if(k||h>1)return v;throw c=!0,j}return function(h,j,k){if(m>1)throw TypeError("Generator is already running");for(c&&j===1&&R(j,k),u=j,s=k;(r=u<2?e:s)||!c;){l||(u?u<3?(u>1&&(y.n=-1),R(u,s)):y.n=s:y.v=s);try{if(m=2,l){if(u||(h="next"),r=l[h]){if(!(r=r.call(l,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,u<2&&(u=0)}else u===1&&(r=l.return)&&r.call(l),u<2&&(s=TypeError("The iterator does not provide a '"+h+"' method"),u=1);l=e}else if((r=(c=y.n<0)?s:S.call(a,y))!==v)break}catch(O){l=e,u=1,s=O}finally{m=1}}return{value:r,done:c}}}(w,V,W),!0),C}var v={};function p(){}function d(){}function b(){}r=Object.getPrototypeOf;var g=[][n]?r(r([][n]())):(F(r={},n,function(){return this}),r),P=b.prototype=p.prototype=Object.create(g);function I(w){return Object.setPrototypeOf?Object.setPrototypeOf(w,b):(w.__proto__=b,F(w,i,"GeneratorFunction")),w.prototype=Object.create(P),w}return d.prototype=b,F(P,"constructor",b),F(b,"constructor",d),d.displayName="GeneratorFunction",F(b,i,"GeneratorFunction"),F(P),F(P,i,"Generator"),F(P,n,function(){return this}),F(P,"toString",function(){return"[object Generator]"}),(E=function(){return{w:f,m:I}})()}function F(e,r,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}F=function(v,p,d,b){if(p)i?i(v,p,{value:d,enumerable:!b,configurable:!b,writable:!b}):v[p]=d;else{var g=function(I,w){F(v,I,function(T){return this._invoke(I,w,T)})};g("next",0),g("throw",1),g("return",2)}},F(e,r,t,n)}function me(e,r,t,n,i,f,v){try{var p=e[f](v),d=p.value}catch(b){return void t(b)}p.done?r(d):Promise.resolve(d).then(n,i)}function M(e){return function(){var r=this,t=arguments;return new Promise(function(n,i){var f=e.apply(r,t);function v(d){me(f,n,i,v,p,"next",d)}function p(d){me(f,n,i,v,p,"throw",d)}v(void 0)})}}function ie(e,r){return He(e)||Ue(e,r)||Le(e,r)||Ce()}function Ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Le(e,r){if(e){if(typeof e=="string")return he(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?he(e,r):void 0}}function he(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function Ue(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,i,f,v,p=[],d=!0,b=!1;try{if(f=(t=t.call(e)).next,r!==0)for(;!(d=(n=f.call(t)).done)&&(p.push(n.value),p.length!==r);d=!0);}catch(g){b=!0,i=g}finally{try{if(!d&&t.return!=null&&(v=t.return(),Object(v)!==v))return}finally{if(b)throw i}}return p}}function He(e){if(Array.isArray(e))return e}function We(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Te()?Ee(e):r?e():Se(e)}function qe(e,r,t){var n=je(!0),i=Ie(e,function(f,v){n.value&&r(f,v)},t);return{stop:i,pause:function(){n.value=!1},resume:function(){n.value=!0}}}function oe(e){return Object.entries(e).reduce(function(r,t){var n=ie(t,2),i=n[0],f=n[1];return i.split(/[\.\[\]]+/).filter(Boolean).reduce(function(v,p,d,b){var g;return(g=v[p])!==null&&g!==void 0?g:v[p]=isNaN(b[d+1])?d===b.length-1?f:{}:[]},r),r},{})}function ge(e,r){if(!e||!r)return null;try{var t=e[r];if(_e(t))return t}catch{}var n=r.split(/[\.\[\]]+/).filter(Boolean);return n.reduce(function(i,f){return i&&i[f]!==void 0?i[f]:void 0},e)}var Je=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ve({}),n=ve({}),i=ye(function(){return Object.values(t).every(function(S){return!S.invalid})}),f=ye(function(){return oe(t)}),v=function(a,o){return{value:o??ge(r.initialValues,a),touched:!1,dirty:!1,pristine:!0,valid:!0,invalid:!1,error:null,errors:[]}},p=function(a,o){var l=te(o,a);return l===!0||ne(l)&&l.includes(a)},d=function(){var S=M(E().m(function a(o,l){var u,s,m,$,c;return E().w(function(y){for(;;)switch(y.n){case 0:if(s={},!ne(r[o])){y.n=2;break}return y.n=1,w(r[o]);case 1:s=y.v,y.n=4;break;case 2:if($=(u=r[o])!==null&&u!==void 0?u:l,!$){y.n=4;break}return y.n=3,w();case 3:s=y.v;case 4:if(m=Object.keys(n).filter(function(R){var h;return(h=n[R])===null||h===void 0||(h=h.options)===null||h===void 0?void 0:h[o]})||[],c=_e(m),!c){y.n=6;break}return y.n=5,w(m);case 5:s=y.v;case 6:return y.a(2,s)}},a)}));return function(o,l){return S.apply(this,arguments)}}(),b=function(a,o,l,u){var s,m;((s=o==null?void 0:o[l])!==null&&s!==void 0?s:p(a,(m=r[l])!==null&&m!==void 0?m:u))&&w(a)},g=function(a,o){var l,u;if(!a)return[];(l=n[a])===null||l===void 0||l._watcher.stop(),t[a]||(t[a]=v(a,o==null?void 0:o.initialValue));var s=ue((u=te(o,t[a]))===null||u===void 0?void 0:u.props,te(o==null?void 0:o.props,t[a]),{name:a,onBlur:function(){t[a].touched=!0,b(a,o,"validateOnBlur")},onInput:function(c){t[a].value=c&&Object.hasOwn(c,"value")?c.value:c.target.value},onChange:function(c){t[a].value=c&&Object.hasOwn(c,"value")?c.value:c.target.type==="checkbox"||c.target.type==="radio"?c.target.checked:c.target.value},onInvalid:function(c){var y;t[a].invalid=!0,t[a].errors=c,t[a].error=(y=c==null?void 0:c[0])!==null&&y!==void 0?y:null}}),m=qe(function(){return t[a].value},function($,c){t[a].pristine&&(t[a].pristine=!1),$!==c&&(t[a].dirty=!0),b(a,o,"validateOnValueUpdate",!0)});return n[a]={props:s,states:t[a],options:o,_watcher:m},[t[a],s]},P=function(a){return function(){var o=M(E().m(function l(u){var s;return E().w(function(m){for(;;)switch(m.n){case 0:return m.n=1,d("validateOnSubmit",!0);case 1:return s=m.v,m.a(2,a(ae({originalEvent:u,valid:de(i),states:de(f),reset:T},s)))}},l)}));return function(l){return o.apply(this,arguments)}}()},I=function(a){return function(){var o=M(E().m(function l(u){return E().w(function(s){for(;;)switch(s.n){case 0:return T(),s.a(2,a({originalEvent:u}))}},l)}));return function(l){return o.apply(this,arguments)}}()},w=function(){var S=M(E().m(function a(o){var l,u,s,m,$,c,y,R,h,j,k,O,B,A,J,z,Q,X,Y,Z,L,D,G,U,le,x,H,se,ee;return E().w(function(_){for(;;)switch(_.n){case 0:return $=Object.entries(t).reduce(function(re,$e){var ce=ie($e,2),fe=ce[0],ke=ce[1];return re.names.push(fe),re.values[fe]=ke.value,re},{names:[],values:{}}),c=[$.names,oe($.values)],y=c[0],R=c[1],_.n=1,(u=r.resolver)===null||u===void 0?void 0:u.call(r,{names:y,values:R});case 1:if(le=l=_.v,U=le!==null,!U){_.n=2;break}U=l!==void 0;case 2:if(!U){_.n=3;break}x=l,_.n=4;break;case 3:x={values:R};case 4:h=x,(m=(s=h).errors)!==null&&m!==void 0||(s.errors={}),j=[o].flat(),k=0,O=Object.entries(n);case 5:if(!(k<O.length)){_.n=12;break}if(B=ie(O[k],2),A=B[0],J=B[1],!(j.includes(A)||!o||Fe(h.errors))){_.n=11;break}if(Y=(z=J.options)===null||z===void 0?void 0:z.resolver,!Y){_.n=10;break}return L=J.states.value,_.n=6,Y({values:L,value:L,name:A});case 6:if(se=Z=_.v,H=se!==null,!H){_.n=7;break}H=Z!==void 0;case 7:if(!H){_.n=8;break}ee=Z,_.n=9;break;case 8:ee={values:L};case 9:D=ee,ne(D.errors)&&(D.errors=Pe({},A,D.errors)),h=Ae(h,D);case 10:G=(Q=ge(h.errors,A))!==null&&Q!==void 0?Q:[],t[A].invalid=G.length>0,t[A].valid=!t[A].invalid,t[A].errors=G,t[A].error=(X=G==null?void 0:G[0])!==null&&X!==void 0?X:null;case 11:k++,_.n=5;break;case 12:return _.a(2,ae(ae({},h),{},{errors:oe(h.errors)}))}},a)}));return function(o){return S.apply(this,arguments)}}(),T=function(){Object.keys(t).forEach(function(){var a=M(E().m(function o(l){var u,s;return E().w(function(m){for(;;)switch(m.n){case 0:return s=n[l]._watcher,s.pause(),n[l].states=t[l]=v(l,(u=n[l])===null||u===void 0||(u=u.options)===null||u===void 0?void 0:u.initialValue),m.n=1,Se();case 1:s.resume();case 2:return m.a(2)}},o)}));return function(o){return a.apply(this,arguments)}}())},V=function(a,o){t[a]!==void 0&&(t[a].value=o)},W=function(a){var o;return(o=n[a])===null||o===void 0?void 0:o.states},q=function(a){Object.keys(a).forEach(function(o){return V(o,a[o])})},C=function(){d("validateOnMount")};return We(C),{defineField:g,setFieldValue:V,getFieldState:W,handleSubmit:P,handleReset:I,validate:w,setValues:q,reset:T,valid:i,states:f,fields:n}},ze={root:"p-form p-component"},Qe=Re.extend({name:"form",classes:ze}),Xe={name:"BaseForm",extends:Me,style:Qe,props:{resolver:{type:Function,default:null},initialValues:{type:Object,default:null},validateOnValueUpdate:{type:[Boolean,Array],default:!0},validateOnBlur:{type:[Boolean,Array],default:!1},validateOnMount:{type:[Boolean,Array],default:!1},validateOnSubmit:{type:[Boolean,Array],default:!0}},provide:function(){return{$pcForm:this,$parentInstance:this}}};function K(e){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},K(e)}function Oe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function Ye(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Oe(Object(t),!0).forEach(function(n){Ze(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ze(e,r,t){return(r=xe(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function xe(e){var r=er(e,"string");return K(r)=="symbol"?r:r+""}function er(e,r){if(K(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(K(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function rr(e,r){return or(e)||ar(e,r)||nr(e,r)||tr()}function tr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(e,r){if(e){if(typeof e=="string")return we(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?we(e,r):void 0}}function we(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function ar(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,i,f,v,p=[],d=!0,b=!1;try{if(f=(t=t.call(e)).next,r!==0)for(;!(d=(n=f.call(t)).done)&&(p.push(n.value),p.length!==r);d=!0);}catch(g){b=!0,i=g}finally{try{if(!d&&t.return!=null&&(v=t.return(),Object(v)!==v))return}finally{if(b)throw i}}return p}}function or(e){if(Array.isArray(e))return e}var ur={name:"Form",extends:Xe,inheritAttrs:!1,emits:["submit","reset"],setup:function(r,t){var n=t.emit,i=je(null),f=Je(r),v=function(){var P;(P=i.value)===null||P===void 0||P.requestSubmit()},p=function(P,I){if(!(I!=null&&I.novalidate)){var w=f.defineField(P,I),T=rr(w,2),V=T[1];return V}return{}},d=f.handleSubmit(function(g){n("submit",g)}),b=f.handleReset(function(g){n("reset",g)});return Ye({formRef:i,submit:v,register:p,onSubmit:d,onReset:b},Be(f,["handleSubmit","handleReset"]))}};function ir(e,r,t,n,i,f){return Ge(),Ve("form",ue({ref:"formRef",onSubmit:r[0]||(r[0]=pe(function(){return n.onSubmit&&n.onSubmit.apply(n,arguments)},["prevent"])),onReset:r[1]||(r[1]=pe(function(){return n.onReset&&n.onReset.apply(n,arguments)},["prevent"])),class:e.cx("root")},e.ptmi("root")),[De(e.$slots,"default",ue({register:n.register,valid:e.valid,reset:e.reset},e.states))],16)}ur.render=ir;export{ur as default};
